---
description: Defines the structure and management of environment variables across development, testing, and production environments, ensuring secure handling of sensitive data and consistent configuration.
globs: .env*
alwaysApply: false
---

Sub rule 1: Environment File Structure
- Use `.env` for non-sensitive production variables
- Use `.env.local` for sensitive production variables (passwords, API keys, secrets)
- Add all sensitive variables to `.env` with empty values as placeholders

Sub rule 2: Production Environment Setup
- Place non-sensitive variables in `.env`: `NEXT_PUBLIC_APP_URL=`, `NODE_ENV=production`
- Place sensitive variables in `.env.local`: `DATABASE_URL=`, `SECRET_KEY=`, `API_TOKEN=`
- Add empty placeholders for sensitive variables in `.env`: `DATABASE_URL=`, `SECRET_KEY=`
- Never commit `.env.local` to version control (add to `.gitignore`)

Sub rule 3: Variable Classification
- Sensitive variables: passwords, API keys, secret tokens, database URLs, private keys
- Non-sensitive variables: URLs, ports, feature flags, public configuration, environment names
- When in doubt, treat variables as sensitive and use `.local` files

Sub rule 4: Security Best Practices
- Always add `.env.local` to `.gitignore`
- Use empty values in committed files to document required variables
- Validate required environment variables on application startup
- Use TypeScript interfaces to type environment variables

Sub rule 5: Documentation and Access
- Document environment variables only in `README.md`
- Do not add comments about environment variables in code files
- Provide clear setup instructions for new developers in documentation
- Production deployment will use `.env.local` for all environment variables
