---
description: Establish standards for opencode development environment configuration, treating opencode.json and .opencode/ directory structure as essential project configuration files that should be maintained, committed, and properly organized for AI-assisted development workflows.
globs: opencode.json, .opencode/**/*
alwaysApply: true
---

Sub rule 1: Configuration File Treatment
- Treat `opencode.json` as core project configuration file
- Treat `.opencode/` directory as essential development infrastructure
- Never add `.opencode/` to `.gitignore` - these files must be version controlled
- Consider opencode configuration as part of the project's architecture and development infrastructure
- Maintain opencode files with same care as package.json, tsconfig.json, etc.

Sub rule 2: Directory Structure Standards
- `.opencode/agent/` - Contains AI agent definitions and capabilities
- `.opencode/rules/` - Contains coding rules and standards for the project
- `.opencode/command/` - Contains reusable command templates for common development tasks
- Maintain consistent directory structure across all projects using opencode
- Use descriptive filenames that clearly indicate purpose (e.g., `commit.md`, `testFix.md`)

Sub rule 3: Agent Configuration (.opencode/agent/)
- Define agent roles, capabilities, and specializations clearly
- Include proper descriptions of when to use each agent
- Maintain agent documentation with examples of typical usage
- Update agent definitions when project requirements change
- Use consistent naming: PascalCase for agent files (e.g., `Raoul.md`, `Deby.md`)

Sub rule 4: Rules Management (.opencode/rules/)
- Organize rules by category using subdirectories (01-standards, 03-frameworks, etc.)
- Use `.mdc` extension for rule files with proper frontmatter
- Include comprehensive descriptions, globs, and application criteria
- Follow consistent rule structure with Sub rule groups
- Update rules when architectural patterns or technologies change

Sub rule 5: Command Templates (.opencode/command/)
- Create reusable command templates for common development workflows
- Include clear goals, step-by-step instructions, and validation criteria
- Use descriptive filenames that indicate command purpose (e.g., `commit.md`, `testFix.md`)
- Maintain consistent command structure across all templates
- Update commands when development processes evolve

Sub rule 6: Frontmatter Standards
- All rule files must include proper frontmatter with description, globs, and alwaysApply
- Use clear, comprehensive descriptions that explain when and why to apply rules
- Define appropriate glob patterns for targeted file matching
- Set alwaysApply to true only for universally applicable rules
- Include agent and model specifications in command frontmatter

Sub rule 7: Version Control and Collaboration
- Commit all opencode configuration changes with descriptive messages
- Treat opencode changes as architectural modifications
- Review opencode changes in pull requests like any other code changes
- Ensure team consistency by sharing opencode configurations
- Document any custom opencode setups for team onboarding

Sub rule 8: Integration with Development Workflow
- Use opencode commands consistently for repeatable development tasks
- Apply rules automatically through opencode configuration
- Leverage agents for specialized development tasks
- Maintain command templates to reduce prompt engineering overhead
- Use opencode as primary interface for AI-assisted development

Sub rule 9: Configuration Validation
- Validate opencode.json schema compliance
- Ensure all referenced rule files exist and are properly formatted
- Verify agent definitions are complete and functional
- Test command templates before committing changes
- Check glob patterns match intended files

Sub rule 10: Documentation and Maintenance
- Keep opencode documentation synchronized with actual configuration
- Update rule descriptions when project requirements change
- Maintain changelog for significant opencode configuration changes
- Provide examples for complex command templates
- Ensure new team members understand opencode structure and usage